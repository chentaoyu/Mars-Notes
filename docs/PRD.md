# 云笔记系统 - 产品需求文档 (PRD)

## 文档信息

- **产品名称**: 云笔记 (CloudNote)
- **版本号**: v1.0
- **文档版本**: 1.0
- **创建日期**: 2025-11-04
- **最后更新**: 2025-11-04

---

## 1. 产品概述

### 1.1 产品定位

云笔记是一款面向个人用户的轻量级在线笔记应用，专注于提供简洁、高效的 Markdown 笔记编辑与管理体验。产品以"简单、快速、可靠"为核心理念，帮助用户随时随地记录和管理自己的想法、知识和灵感。

### 1.2 产品愿景

成为最易用的个人云笔记工具，让每个人都能轻松管理自己的知识库。

### 1.3 产品目标

- 提供流畅的 Markdown 编辑体验
- 确保数据安全和隐私保护
- 支持跨设备访问和同步
- 降低用户学习成本，开箱即用

---

## 2. 目标用户

### 2.1 用户画像

#### 主要用户群体

**程序员/技术人员**
- 年龄: 22-35 岁
- 需求: 记录技术笔记、代码片段、学习心得
- 特点: 熟悉 Markdown 语法，注重效率和简洁性

**学生群体**
- 年龄: 18-25 岁
- 需求: 课堂笔记、学习资料整理、考试复习
- 特点: 需要快速记录，便于查找和复习

**知识工作者**
- 年龄: 25-40 岁
- 需求: 会议记录、项目文档、个人知识管理
- 特点: 需要稳定可靠的工具，支持长期使用

### 2.2 用户需求分析

| 用户类型 | 核心需求 | 痛点 | 期望 |
|---------|---------|------|------|
| 程序员 | 技术笔记、代码高亮 | 工具复杂、启动慢 | 简单快速、支持代码 |
| 学生 | 快速记录、便于复习 | 格式混乱、难查找 | 清晰整洁、易搜索 |
| 知识工作者 | 知识积累、长期存档 | 数据丢失、迁移难 | 数据安全、易导出 |

---

## 3. 核心功能列表

### 3.1 功能模块概览

```
云笔记系统
│
├── 用户认证模块
│   ├── 用户注册
│   ├── 用户登录
│   └── 会话管理
│
├── 笔记管理模块
│   ├── 笔记列表
│   ├── 创建笔记
│   ├── 编辑笔记
│   ├── 删除笔记
│   └── 搜索笔记
│
└── 编辑器模块
    ├── Markdown 编辑
    ├── 实时预览
    ├── 代码高亮
    └── 自动保存
```

### 3.2 详细功能说明

#### 3.2.1 用户认证模块

**用户注册**
- 邮箱 + 密码注册
- 邮箱格式验证
- 密码强度检查（最少 8 位，包含字母和数字）
- 注册成功自动登录

**用户登录**
- 邮箱 + 密码登录
- "记住我" 选项（延长会话时间）
- 登录失败提示
- 登录成功跳转到笔记列表

**会话管理**
- 基于 Token 的会话机制
- 自动刷新 Token
- 登出功能
- 会话过期提醒

#### 3.2.2 笔记管理模块

**笔记列表**
- 卡片式布局展示
- 显示笔记标题、摘要、更新时间
- 按更新时间倒序排列
- 响应式设计（支持移动端）
- 空状态提示

**创建笔记**
- 点击"新建笔记"按钮
- 自动生成默认标题（如：未命名笔记 - 日期）
- 自动跳转到编辑器
- 即时保存到数据库

**编辑笔记**
- Markdown 编辑器
- 左右分屏（编辑 + 预览）
- 实时预览
- 自动保存（每 2 秒或内容变化时）
- 手动保存按钮
- 保存状态提示（已保存/保存中）

**删除笔记**
- 删除确认对话框
- 软删除或硬删除
- 删除后返回列表页
- 删除成功提示

**搜索笔记**
- 搜索框实时搜索
- 支持标题和内容搜索
- 高亮显示匹配结果
- 搜索结果计数

#### 3.2.3 编辑器模块

**Markdown 编辑**
- 支持标准 Markdown 语法
- 标题（H1-H6）
- 列表（有序/无序）
- 代码块和行内代码
- 链接和图片
- 引用和分割线
- 表格

**实时预览**
- 左右分屏显示
- 编辑器和预览同步滚动
- 代码高亮（支持多种编程语言）
- 响应式布局（移动端可切换编辑/预览）

**自动保存**
- 内容变化后 2 秒自动保存
- 保存状态指示器
- 保存失败重试机制
- 离线编辑本地缓存（未来）

---

## 4. 用户故事与使用场景

### 4.1 用户故事

**Story 1: 新用户注册**
> 作为一个新用户  
> 我想要注册一个账号  
> 以便我可以开始使用云笔记

**验收标准**:
- 能够通过邮箱和密码注册
- 密码必须符合安全要求
- 注册成功后自动登录
- 注册失败有明确的错误提示

---

**Story 2: 快速创建笔记**
> 作为一个已登录用户  
> 我想要快速创建一篇新笔记  
> 以便我可以立即记录我的想法

**验收标准**:
- 点击"新建"按钮即可创建
- 自动生成默认标题
- 立即进入编辑状态
- 自动保存编辑内容

---

**Story 3: Markdown 编辑**
> 作为一个技术用户  
> 我想要使用 Markdown 编写笔记  
> 以便我可以格式化文本和插入代码

**验收标准**:
- 支持标准 Markdown 语法
- 实时预览效果
- 代码块语法高亮
- 编辑和预览同步滚动

---

**Story 4: 搜索笔记**
> 作为一个有很多笔记的用户  
> 我想要快速搜索我的笔记  
> 以便我可以找到特定的内容

**验收标准**:
- 搜索框支持实时搜索
- 搜索标题和内容
- 显示匹配的笔记数量
- 高亮显示搜索关键词

---

**Story 5: 删除笔记**
> 作为一个用户  
> 我想要删除不需要的笔记  
> 以便保持我的笔记列表整洁

**验收标准**:
- 删除前有确认提示
- 删除后立即从列表消失
- 有删除成功的提示
- 删除操作不可逆（v1.0）

### 4.2 使用场景

**场景 1: 技术学习记录**
1. 用户学习新技术时打开云笔记
2. 创建一篇新笔记，命名为"React Hooks 学习"
3. 使用 Markdown 记录知识点和代码示例
4. 实时预览确保格式正确
5. 内容自动保存，无需担心丢失

**场景 2: 会议记录**
1. 会议开始前登录云笔记
2. 快速创建"周会 2025-11-04"笔记
3. 使用列表记录会议要点
4. 使用表格整理任务分配
5. 会议结束后自动保存，稍后可随时查看

**场景 3: 知识检索**
1. 用户想回顾之前的学习笔记
2. 在搜索框输入关键词
3. 系统快速返回匹配的笔记
4. 点击笔记查看详细内容
5. 必要时可以继续编辑补充

---

## 5. 功能优先级

### 5.1 P0 级（必须有）

| 功能 | 说明 | 理由 |
|-----|------|------|
| 用户注册 | 邮箱密码注册 | 用户身份管理基础 |
| 用户登录 | 邮箱密码登录 | 访问控制必需 |
| 创建笔记 | 新建空白笔记 | 核心功能 |
| 编辑笔记 | Markdown 编辑 | 核心功能 |
| 保存笔记 | 自动保存机制 | 数据持久化 |
| 笔记列表 | 展示所有笔记 | 内容管理基础 |
| 删除笔记 | 删除不需要的笔记 | 内容管理基础 |

### 5.2 P1 级（应该有）

| 功能 | 说明 | 理由 |
|-----|------|------|
| 实时预览 | Markdown 实时渲染 | 提升编辑体验 |
| 代码高亮 | 代码块语法高亮 | 技术用户刚需 |
| 搜索笔记 | 标题内容搜索 | 提高检索效率 |
| 响应式设计 | 移动端适配 | 扩大使用场景 |
| 会话管理 | 自动登出和续期 | 安全性和体验 |

### 5.3 P2 级（可以有 - 未来版本）

| 功能 | 说明 | 计划版本 |
|-----|------|---------|
| 笔记本分类 | 按笔记本组织笔记 | v1.1 |
| 标签系统 | 为笔记添加标签 | v1.1 |
| 笔记分享 | 生成公开分享链接 | v1.2 |
| 暗黑模式 | 支持深色主题 | v1.2 |
| 导出功能 | 导出为 PDF/MD | v1.3 |
| 附件上传 | 支持图片和文件 | v1.3 |
| 版本历史 | 查看笔记修改历史 | v2.0 |
| 协作编辑 | 多人实时协作 | v2.0 |

---

## 6. 非功能需求

### 6.1 性能要求

| 指标 | 目标值 | 说明 |
|-----|--------|------|
| 页面加载时间 | < 2 秒 | 首次加载 |
| 操作响应时间 | < 500ms | 用户操作反馈 |
| 自动保存延迟 | 2 秒 | 内容变化后 |
| 搜索响应时间 | < 1 秒 | 笔记数量 < 1000 |
| 并发用户数 | 100+ | 初期目标 |

### 6.2 安全要求

- **数据加密**: 密码使用 bcrypt 加密存储（成本因子 ≥ 10）
- **会话安全**: 使用 HTTP-Only Cookie 存储 Token
- **HTTPS**: 生产环境必须使用 HTTPS
- **输入验证**: 所有用户输入必须验证和清理
- **权限控制**: 用户只能访问自己的笔记
- **CSRF 防护**: 防止跨站请求伪造攻击

### 6.3 可用性要求

- **系统可用性**: 99% 以上
- **数据备份**: 每日自动备份
- **错误恢复**: 自动保存失败时本地缓存
- **浏览器兼容**: 支持 Chrome/Firefox/Safari/Edge 最新版本
- **移动端兼容**: 支持 iOS 和 Android 主流浏览器

### 6.4 可维护性要求

- 代码覆盖率 > 70%（未来目标）
- 遵循 TypeScript 严格模式
- 统一的代码风格（ESLint + Prettier）
- 完善的文档和注释
- 模块化设计，便于扩展

---

## 7. 约束条件

### 7.1 技术约束

- 必须使用 Next.js 14+ App Router
- 必须使用 TypeScript
- 数据库必须使用 PostgreSQL
- 前后端一体化架构（无需单独部署）

### 7.2 业务约束

- v1.0 版本仅支持个人使用（单用户多笔记）
- 暂不支持团队协作功能
- 暂不支持付费功能
- 初期不考虑国际化（仅中文界面）

### 7.3 时间约束

- v1.0 预计开发周期: 2-3 周
- 核心功能优先实现
- 美化和优化功能后续迭代

---

## 8. 成功指标

### 8.1 产品指标

- **用户注册率**: 访问用户中 > 30% 完成注册
- **用户留存率**: 7 日留存率 > 40%
- **笔记创建率**: 注册用户中 > 80% 创建至少 1 篇笔记
- **日活用户**: 注册用户中 > 20% 每日活跃
- **用户满意度**: NPS 评分 > 8 分

### 8.2 技术指标

- **系统稳定性**: 错误率 < 1%
- **页面性能**: Lighthouse 评分 > 90
- **API 响应**: P95 响应时间 < 500ms
- **数据一致性**: 笔记保存成功率 > 99.9%

---

## 9. 未来规划

### 9.1 短期规划（3-6 个月）

**v1.1 - 组织管理**
- 笔记本分类功能
- 标签系统
- 高级搜索（按标签、日期筛选）
- 笔记排序（按标题、时间、字数）

**v1.2 - 体验优化**
- 暗黑模式
- 快捷键支持
- 笔记分享（只读链接）
- 移动端 PWA 支持

**v1.3 - 数据增强**
- 导出功能（Markdown、PDF、HTML）
- 数据导入（从其他笔记应用）
- 图片上传和管理
- 笔记统计（字数、阅读时长）

### 9.2 长期规划（6-12 个月）

**v2.0 - 协作与同步**
- 版本历史和回滚
- 笔记回收站
- 实时协作编辑
- 多端同步优化

**v2.1 - 智能化**
- AI 辅助写作
- 智能标签推荐
- 笔记关联推荐
- 全文智能搜索

---

## 10. 风险与挑战

### 10.1 技术风险

| 风险 | 影响 | 缓解措施 |
|-----|------|---------|
| 数据丢失 | 高 | 定期备份、自动保存、本地缓存 |
| 性能瓶颈 | 中 | 数据库索引优化、分页加载 |
| 安全漏洞 | 高 | 安全审计、依赖更新、输入验证 |
| 跨浏览器兼容 | 低 | 使用成熟框架、充分测试 |

### 10.2 产品风险

| 风险 | 影响 | 缓解措施 |
|-----|------|---------|
| 用户流失 | 中 | 持续优化体验、收集反馈 |
| 功能不足 | 中 | 快速迭代、优先核心功能 |
| 竞品压力 | 低 | 专注差异化、简洁易用 |

---

## 11. 附录

### 11.1 竞品分析

**印象笔记 (Evernote)**
- 优势: 功能丰富、生态完善
- 劣势: 界面复杂、启动慢、免费版限制多
- 差异化: 我们更简洁、更快、完全免费

**Notion**
- 优势: 强大的协作功能、灵活的块编辑
- 劣势: 学习成本高、中文支持差
- 差异化: 我们专注笔记、更轻量、更快速

**语雀**
- 优势: 团队协作、知识库
- 劣势: 需要登录阿里账号、偏企业用户
- 差异化: 我们面向个人、开箱即用

### 11.2 术语表

- **Markdown**: 一种轻量级标记语言
- **ORM**: 对象关系映射（Object-Relational Mapping）
- **SSR**: 服务端渲染（Server-Side Rendering）
- **PWA**: 渐进式 Web 应用（Progressive Web App）
- **Token**: 身份验证令牌
- **CRUD**: 创建、读取、更新、删除操作

### 11.3 参考资料

- Next.js 官方文档: https://nextjs.org/docs
- Prisma 官方文档: https://www.prisma.io/docs
- NextAuth.js 官方文档: https://authjs.dev
- Tailwind CSS 官方文档: https://tailwindcss.com/docs
- React Markdown: https://github.com/remarkjs/react-markdown

---

**文档维护**
- 本文档将随着产品迭代持续更新
- 重大变更需要版本号递增
- 所有变更需要记录在变更日志中

